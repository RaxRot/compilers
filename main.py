from lss_parser import parser
from lss_executor import execute_command, save_data
import os


# –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥, –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º main.py –Ω–∞–ø—Ä—è–º—É—é
# (–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –µ–≥–æ –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª)
if __name__ == "__main__":

    file_path = "test.lss"  # –£–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è LSS-—Ñ–∞–π–ª–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ–º —á–∏—Ç–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã
    print("üìÇ Reading file from:", os.path.abspath(file_path))  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É


    # üí• –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –æ—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –ø—É—Å—Ç—ã–º–∏ —Å–ø–∏—Å–∫–∞–º–∏)
    save_data({'schedule': [], 'unavailable': []})

    # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª "test.lss" –∏ —á–∏—Ç–∞–µ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–≤–µ—Å—å —Ç–µ–∫—Å—Ç)
    with open(file_path, "r", encoding="utf-8") as f:
        script = f.read()  # –ß–∏—Ç–∞–µ–º –≤–µ—Å—å —Ñ–∞–π–ª –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
        print("=== SCRIPT CONTENT ===\n", script)  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ —Ç–∞–º –Ω–∞–ø–∏—Å–∞–Ω–æ

        result = parser.parse(script)  # –ü–µ—Ä–µ–¥–∞—ë–º —Ç–µ–∫—Å—Ç –≤ –ø–∞—Ä—Å–µ—Ä ‚Äî –æ–Ω –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç —Ç–µ–∫—Å—Ç –≤ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ (–≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä–µ–π)

        if result:  # –ï—Å–ª–∏ –ø–∞—Ä—Å–µ—Ä –≤–µ—Ä–Ω—É–ª –∫–∞–∫–∏–µ-—Ç–æ –∫–æ–º–∞–Ω–¥—ã (—Ç.–µ. —Ñ–∞–π–ª –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
            print("\nüöÄ EXECUTING COMMANDS:")  # –ì–æ—Ç–æ–≤–∏–º—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

            for i, cmd in enumerate(result, 1):  # –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å –Ω–æ–º–µ—Ä–∞–º–∏ (1, 2, 3...)
                print(f"\n‚û°Ô∏è Command {i}: {cmd}")  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –∑–∞ –∫–æ–º–∞–Ω–¥–∞
                execute_command(cmd)  # –í—ã–ø–æ–ª–Ω—è–µ–º —ç—Ç—É –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

        print("\n‚úÖ Parsing complete.")  # –í —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ

